fragment AddressWithInfo on Address {
    ip
    info {
        type
        hostname
        carrier {
            name
        }
        company {
            domain
            name
            type
        }
        location {
            city
            country {
                name
                area
                tld
                code
                flag {
                    emoji
                }
            }
            latitude
            longitude
        }
    }
    isInAltNetwork
}

subscription RegisterTerminal($id: Float!) {
    registerTerminal(id: $id) {
        id
        type
        status
        payload
        run {
            id
            nfcId
            url
            imagePath
            packetType
            destination {
                ...AddressWithInfo
            }
            origin {
                ...AddressWithInfo
            }
            availableHops {
                id
                address {
                    ...AddressWithInfo
                }
                type
                terminal {
                    id
                    status
                }
                mayPerformTransformation
                hop
            }
            currentHop {
                id
                address {
                    ...AddressWithInfo
                }
                type
                mayPerformTransformation
                hop
            }
            hops {
                id
                address {
                    ...AddressWithInfo
                }
                type
                hop
                status
            }
            createdAt
            updatedAt
        }
        connectionsTo {
            to {
                id
                status
                type
            }
            slot
        }
        createdAt
        updatedAt
    }
}
